<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="my_order_link" name="Link to my order" inherit_id="portal.frontend_layout">
        <xpath expr="//a[@id='o_logout']" position="before">
            <a href="/my/orders" role="menuitem" class="dropdown-item">My Orders</a>
        </xpath>
    </template>

    <template id="portal_my_orders_new" name="My Sales Orders">
        <t t-call="portal.portal_layout">
            <t t-set="breadcrumbs_searchbar" t-value="True"/>

            <t t-call="portal.portal_searchbar">
                <t t-set="title">Sale Orders</t>
            </t>
            <t t-if="not orders">
                <p>There are currently no orders for your account.</p>
            </t>
            <t t-if="orders">
                <t t-call="do_customization.orders_template"/>
            </t>
        </t>
    </template>

    <template id="portal_my_cancel_orders" name="My Cancel Sales Orders">
        <t t-call="portal.portal_layout">
            <t t-set="breadcrumbs_searchbar" t-value="True"/>

            <t t-call="portal.portal_searchbar">
                <t t-set="title">Cancel Orders</t>
            </t>

            <t t-if="not orders">
                <p>There are currently no cancel orders for your account.</p>
            </t>
            <t t-if="orders">
                <t t-call="do_customization.orders_template"/>
            </t>
        </t>
    </template>

    <template id="orders_template">
        <div class="orders_container clearfix">
            <div class="my_orders_outer">
                <t t-foreach="orders" t-as="order">
                    <div class="my_orders">
                        <div class="my_orders_row">
                            <table class="my_orders_table">
                                <tr>
                                    <td><span class='d-md-inline'>Order Number</span><br></br>
                                        <span> <t t-esc="order.name"/> </span></td>
                                    <td class="">
                                        <span>Order Date</span> <br></br>
<!--                                            <span t-field="order.date_order" t-options="{'widget': 'date'}"/>&amp;nbsp;-->
<!--                                            <span class='d-none d-md-inline' t-field="order.date_order" t-options="{'time_only': True}"/>-->
                                        <span class="d-md-inline"><t t-esc="order.date_order.strftime('%d %b %Y')" /></span>
                                    </td>
                                    <td class="d-none">
                                        <span>Total</span> <br></br>
                                        <span t-field="order.amount_total"/></td>
                                    <td></td>
                                    <td></td>
                                    <td class="all_sizes">
                                        <a t-if="cancel" t-att-href="'/my/cancel_orders/'+ str(order.id)"> View Order Details </a>
                                        <a t-else="" t-att-href="order.get_portal_url()"> View Order Details </a>

                                    </td>
                                </tr>
                                <tr class="min_phone_size">
                                    <td colspan="2">
                                        <a t-if="cancel" t-att-href="'/my/cancel_orders/'+ str(order.id)"> View Order Details </a>
                                        <a t-else="" t-att-href="order.get_portal_url()"> View Order Details </a>
                                    </td>
                                </tr>

                            </table>

                        </div>
                        <div class="my_orders_box">
                            <table class="cart_modal_table">
                                <t t-foreach="order.order_line" t-as="line">

                                    <tr t-if="(not line.is_delivery) and (not line.is_voucher)" t-att-data-product-id='line.product_id.id'>
                                        <td align="center" t-if="line.product_id.product_tmpl_id" class='td-img'>
                                            <span t-field="line.product_id.image_128" t-options="{'widget': 'image', 'qweb_img_responsive': False, 'class': 'rounded o_image_64_max'}" />
                                        </td>
                                        <td>
                                            <div class="col-9">
                                                <div>
                                                    <t t-call="website_sale.cart_line_product_link">
                                                        <span class="h6" t-esc="line.name_short" />
                                                    </t>
                                                    <div class="min_phone_size">
                                                        <span t-field="line.price_reduce_taxexcl" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'display_currency': line.currency_id}" groups="account.group_show_line_subtotals_tax_excluded" />
                                                        <span t-field="line.price_reduce_taxinc" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'display_currency': line.currency_id}" groups="account.group_show_line_subtotals_tax_included" />
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="td-price all_sizes">
                                            <span t-field="line.price_reduce_taxexcl" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'display_currency': line.currency_id}" groups="account.group_show_line_subtotals_tax_excluded" />
                                            <span t-field="line.price_reduce_taxinc" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'display_currency': line.currency_id}" groups="account.group_show_line_subtotals_tax_included" />
                                        </td>
                                    </tr>
                                </t>
                            </table>

                        </div>
                    </div>
                </t>

                <div t-if="pager" class="o_portal_pager text-center">
                    <t t-call="portal.pager"/>
                </div>
            </div>
            <div class="ordered_products_container">
                <h3>Purchased Products</h3>
                <div class="ordered_products_box">
                    <t t-foreach="order_lines" t-as="line">
                        <div t-if="(not line.is_delivery) and (not line.is_voucher)" t-att-data-product-id='line.product_id.id' class="ordered_product">
                            <div align="center" t-if="line.product_id.product_tmpl_id" class='td-img ordered_product_img'>
                                <span t-field="line.product_id.image_128" t-options="{'widget': 'image', 'qweb_img_responsive': False, 'class': 'rounded'}" />
                            </div>
                            <div class="ordered_product_details" t-att-data-product-id='line.product_id.id'>
                                <div>
                                    <t t-call="website_sale.cart_line_product_link">
                                        <span class="h6" t-esc="line.name_short" />
                                    </t>
                                </div>
                                <div class="td-price">
                                    <span t-field="line.price_reduce_taxexcl" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'display_currency': line.currency_id}" groups="account.group_show_line_subtotals_tax_excluded" />
                                    <span t-field="line.price_reduce_taxinc" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'display_currency': line.currency_id}" groups="account.group_show_line_subtotals_tax_included" />
                                </div>
                                <div>
                                    <span>Ordered at: <t t-esc="line.create_date.strftime('%d %b %Y')" /></span>
                                </div>
                                <div t-if="not cancel">
                                    <input type="hidden" name="product_id"  class="product_template_id" t-att-value="line.product_id.id"/>
                                    <a id="buy-again2" class="btn mt8 js_check_product a-submit wk_test">Purchase again</a>
                                </div>
                            </div>

                        </div>
                    </t>
                </div>
            </div>
        </div>
    </template>

    <template id="portal_table_new" name="My Portal Table">
        <div t-attf-class="table-responsive border rounded border-top-0 #{classes if classes else ''}">
            <table class="table rounded mb-0 bg-white portal_orders_table">
                <t t-raw="0"/>
            </table>
        </div>
        <div t-if="pager" class="o_portal_pager text-center">
            <t t-call="portal.pager"/>
        </div>
    </template>

    <template id="order_details_page" name="Order Details">
        <t t-call="portal.portal_layout">
            <t t-set="breadcrumbs_searchbar" t-value="True"/>

            <t t-call="portal.portal_searchbar">
                <t t-set="title">Sales Orders</t>
            </t>
            <t t-if="cancel">
                <t t-set="sale_order" t-value="cancel_order" />
            </t>
            <div class="order_details_outer">
                <div class="order_details_header clearfix">
                    <div class="inner_header">
                        <h2>Order Details</h2>
                        <h5>Order ID <t t-esc="sale_order.name"/> </h5>
                    </div>
                    <div t-if="not cancel" class="download_box o_download_pdf btn-toolbar flex-sm-nowrap">
                        <div class="btn-group flex-grow-1 mb-1">
                            <a class="btn btn-secondary btn-block o_download_btn" t-att-href="sale_order.get_portal_url(report_type='pdf')" title="View"><i class="fa fa-download"/> View Invoice</a>
                        </div>
                        <div class="btn-group flex-grow-1 mb-1">
                            <a class="btn btn-secondary btn-block o_download_btn" t-att-href="sale_order.get_portal_url(report_type='pdf', download=True)" title="Download"><i class="fa fa-download"/> Download</a>
                        </div>
                        <div class="btn-group flex-grow-1 mb-1">
                            <a class="btn btn-secondary btn-block o_print_btn o_portal_invoice_print" t-att-href="sale_order.get_portal_url(report_type='pdf')" id="print_invoice_report" title="Print" target="_blank"><i class="fa fa-print"/> Print</a>
                        </div>

                    </div>
                </div>

                <div class="order_details_body clearfix">
                    <div class="orders_left_box">
                        <div t-if="cancel" class="cancel_text_box">
                            <h5>This order is cancelled</h5>
                        </div>
                        <div t-att-class="'table_box cancel_blur' if cancel else 'table_box'">
                            <table class="cart_modal_table" >
                                <thead>
                                    <tr>
                                        <th></th>
                                        <th class="text-left">Products</th>
                                        <th class="text-right all_sizes">Quantity</th>
                                        <th t-attf-class="text-right {{ 'd-none d-sm-table-cell' if report_type == 'html' else '' }}">Unit Price</th>
                                        <th t-attf-class="text-right {{ 'd-none d-sm-table-cell' if report_type == 'html' else '' }}">
                                            <span>Discount</span>
                                        </th>
    <!--                                    <th t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">-->
    <!--                                        <span>Taxes</span>-->
    <!--                                    </th>-->
                                        <th class="text-right" >
                                            <span groups="account.group_show_line_subtotals_tax_excluded">Amount</span>
                                            <span groups="account.group_show_line_subtotals_tax_included">Total Price</span>
                                        </th>
                                    </tr>
                                </thead>
                                <t t-foreach="sale_order.order_line" t-as="line">
                                    <tr t-if="(not line.is_delivery) and (not line.is_voucher)" t-att-style="'opacity: 0.4' if line.delivery_status == 'hold' else ''"
                                        t-att-data-product-id='line.product_id.id' t-att-data-order-line="line.id"
                                        class=".product_tracking">
                                        <t t-if="not line.display_type">
                                            <td align="center" t-if="line.product_id.product_tmpl_id" class='td-img'>
                                                <span t-field="line.product_id.image_128" t-options="{'widget': 'image', 'qweb_img_responsive': False, 'class': 'rounded'}" />
                                            </td>
                                            <td class="width_40">
                                                <div>
                                                    <div>
                                                        <t t-call="website_sale.cart_line_product_link">
                                                            <span class="h6" t-esc="line.name_short" />
                                                        </t>
                                                        <t t-foreach="line.product_template_attribute_value_ids" t-as="attr">
                                                            <p class="">
                                                                <span><t t-esc="attr.attribute_id.name"/> -
                                                                    <t t-esc="attr.product_attribute_value_id.name" />
                                                                </span>
                                                            </p>
                                                        </t>
                                                        <p class="attribute_text"> Sold by: <t t-esc="line.product_id.marketplace_seller_id.name"/> </p>
                                                    </div>
                                                    <button t-if="track_product" id="product_tracking_btn">Track your product</button>
                                                </div>
                                            </td>
                                            <td class="text-right all_sizes">
                                                <div id="quote_qty">
                                                    <span t-field="line.product_uom_qty"/>
                                                    <span t-field="line.product_uom" groups="uom.group_uom"/>
                                                </div>
                                            </td>
                                            <td t-attf-class="text-right {{ 'd-none d-sm-table-cell' if report_type == 'html' else '' }}">
                                                <div
                                                    t-field="line.price_unit"
                                                    t-options="{'widget': 'monetary', 'display_currency': sale_order.currency_id}" />
                                            </td>
                                            <td  t-attf-class="text-right {{ 'd-none d-sm-table-cell' if report_type == 'html' else '' }}">
                                                <strong>
                                                    <t t-if="line.discount_amount &gt; 0">
                                                        <t t-esc="line.discount_amount" /> Ks
                                                    </t>
                                                    <t t-elif="line.discount &gt; 0">
                                                        <t t-esc="line.discount" /> %
                                                    </t>
                                                    <t t-else=""> 0.0 </t>
    <!--                                                <t t-esc="((line.discount % 1) and '%s' or '%d') % line.discount"/>%-->
                                                </strong>
                                            </td>
        <!--                                    <td t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">-->
        <!--                                        <span t-esc="', '.join(map(lambda x: (x.description or x.name), line.tax_id))"/>-->
        <!--                                    </td>-->
                                            <td class="text-right">
                                                <h6 class="oe_order_line_price_subtotal" t-field="line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                                                <h6 class="oe_order_line_price_total" t-field="line.price_total" groups="account.group_show_line_subtotals_tax_included"/>
                                                <div id="quote_qty" class="min_phone_size">
                                                    <span> Qty : </span>
                                                    <span t-field="line.product_uom_qty"/>
                                                    <span t-field="line.product_uom" groups="uom.group_uom"/>
                                                </div>
                                            </td>
                                        </t>
                                        <t t-if="line.display_type == 'line_section'">
                                            <td colspan="99">
                                                <span t-field="line.name"/>
                                            </td>
                                            <t t-set="current_section" t-value="line"/>
                                            <t t-set="current_subtotal" t-value="0"/>
                                        </t>
                                        <t t-if="line.display_type == 'line_note'">
                                            <td colspan="99">
                                                <span t-field="line.name"/>
                                            </td>
                                        </t>

                                    </tr>
                                    <tr t-if="line.delivery_status == 'hold'">
                                        <td colspan="6" class="hold_text">
                                            <h4>
                                                This product is hold <span t-if="line.hold_reason"> due to the reason (
                                                <t t-esc="line.hold_reason" /> )</span>
                                            </h4>
                                        </td>
                                    </tr>

                                    <div t-if="not line.is_delivery">
                                        <div id="product_tracking_modal"></div>
                                    </div>
                                </t>
                            </table>

                            <div id="order_details_total" name="total" style="page-break-inside: avoid;">
                                <div>
                                    <!-- Should be replaced in master by t-call="sale.sale_order_portal_content_totals_table" -->
                                    <table class="">
                                        <t t-set="subtotal" t-value="sale_order.amount_untaxed - sale_order.amount_delivery + sale_order.wk_coupon_value" />
                                        <tr class="border-black">
                                            <td><strong>Subtotal</strong></td>
                                            <td class="text-right">
                                                <span
                                                    data-id="total_untaxed"
                                                    t-esc="subtotal"
                                                    t-options='{"widget": "monetary","display_currency": sale_order.pricelist_id.currency_id}'
                                                />
                                            </td>
                                        </tr>
                                        <tr t-if="sale_order.wk_coupon_value">
                                            <td><strong>Gift Voucher</strong></td>
                                            <td class=" text-right">
                                                <span>
                                                    <strong t-esc="sale_order.wk_coupon_value * (-1)" class="summary monetary_field" style="white-space: nowrap;"
                                                            t-options='{"widget": "monetary", "display_currency": sale_order.currency_id,}'/>
                                                </span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><strong>Delivery</strong></td>
                                            <td class="text-right" >
                                               <span t-field="sale_order.amount_delivery" class="monetary_field" style="white-space: nowrap;"
                                                     t-options='{
                                                  "widget": "monetary",
                                                  "display_currency": sale_order.currency_id,
                                              }'/>
                                          </td>
                                        </tr>
                                        <t t-foreach="sale_order.amount_by_group" t-as="amount_by_group">
                                            <tr>
                                                <t t-if="amount_by_group[3] == 1 and sale_order.amount_untaxed == amount_by_group[2]">
                                                    <td>
                                                        <span t-esc="amount_by_group[0]"/>
                                                        <span>&amp;nbsp;<span>on</span>&amp;nbsp;<t t-esc="amount_by_group[2]" t-options='{"widget": "monetary", "display_currency": sale_order.pricelist_id.currency_id}'/></span>
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-esc="amount_by_group[1]"
                                                            t-options='{"widget": "monetary", "display_currency": sale_order.pricelist_id.currency_id}'/>
                                                    </td>
                                                </t>
                                                <t t-else ="">
                                                    <td>
                                                        <span t-esc="amount_by_group[0]"/>
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-esc="amount_by_group[1]"
                                                            t-options='{"widget": "monetary", "display_currency": sale_order.pricelist_id.currency_id}'/>
                                                    </td>
                                                </t>
                                            </tr>
                                        </t>
                                        <tr class="border-black">
                                            <td><strong>Total</strong></td>
                                            <td class="text-right">
                                                <span data-id="total_amount" t-field="sale_order.amount_total" t-options='{"widget": "monetary", "display_currency": sale_order.pricelist_id.currency_id}'/>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div t-att-class="'customer_details cancel_blur' if cancel else 'customer_details'">
                            <h3>Customer Details</h3>

                            <table class="customer_details_table">

                                <tr class="shipping_address">
                                    <td class="width_30"><h5><strong>Shipping Address:</strong></h5></td>
                                    <td><span t-esc='sale_order.partner_shipping_id' t-options="dict(widget='contact', fields=['address'],
                                                  no_marker=True, separator=', ')"  class="address-inline"/>
                                        <p><span class="fa fa-phone" /><t t-esc="sale_order.partner_shipping_id.phone" /></p>
                                        <p><span class="fa fa-envelope" /><t t-esc="sale_order.partner_shipping_id.email" /></p>
                                    </td>
                                </tr>

                                <tr class="payment_info">
                                    <t t-if="sale_order.transaction_ids">
                                        <t t-set="payment_tx_id" t-value="sale_order.get_portal_last_transaction()"/>
                                        <t t-set="reference" t-value="sale_order.reference"/>
                                        <td class="width_30"><h5><strong>Payment Method: </strong></h5></td>

                                        <td>
                                            <span align="center" t-if="payment_tx_id.acquirer_id.image_128" class='td-img'>
                                                <span t-field="payment_tx_id.acquirer_id.image_128" t-options="{'widget': 'image', 'qweb_img_responsive': False, 'class': 'rounded'}" />
                                            </span>
                                            <span><t t-esc="payment_tx_id.acquirer_id.name"/></span>
                                        </td>
                                    </t>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <div class="orders_right_box clearfix">
                        <div t-if="not cancel" t-att-style="'width: 100%;' if sale_order.get_portal_last_transaction().acquirer_id.name == 'Cash on Delivery' else ''"
                             class="order_history">
                            <h3>Order History</h3>
                            <div class="order_history_inner">
                                <t t-foreach="delivery_progress" t-as="pro">
                                    <div class="order_status">
                                        <h5 t-attf-class="is_#{pro_value[0]}"><t t-esc="pro" />
                                            <span t-if="pro_value[0] == 'complete'"><i class="fa fa-check-circle"/></span> </h5>
                                        <p><t t-esc="pro_value[1]"/> </p>
                                    </div>
                                </t>
                            </div>
                        </div>
                        <div t-if="not cancel and sale_order.get_portal_last_transaction().acquirer_id.name != 'Cash on Delivery'"
                                class="payment_ss_outer" >
                            <div t-att-data-order-id="sale_order.id" class="payment_ss_editor">
                                <h5>Payment Screenshot</h5>
                                <div class="payment_ss_editor_inner">
                                    <span align="center" t-if="sale_order.payment_upload" class='td-img'>
                                        <span id="ss_img" t-field="sale_order.payment_upload"
                                              t-options="{'widget': 'image', 'qweb_img_responsive': False, 'class': 'rounded'}" />
                                    </span>
                                </div>
                                <div t-if="sale_order.state == 'sale'" class="change_ss_outer">
                                    <input type="hidden" name="id"  class="product_template_id" t-att-value="sale_order.id"/>
                                    <t t-if="sale_order.payment_upload">
                                        <a id="edit_ss_btn" class="btn mt8 js_check_product a-submit wk_test">Change screenshot</a>
                                    </t>
                                    <t t-else="">
                                        <p>Your payment screenshot is not uploaded yet! </p>
                                        <a id="edit_ss_btn" class="btn mt8 js_check_product a-submit wk_test">Upload screenshot</a>
                                    </t>
                                </div>
                            </div>
                            <div id="payment_ss_edit_modal"></div>
                            <div id="payment_ss_view_modal"></div>
                        </div>


                    </div>
                </div>

            </div>

        </t>
    </template>

    <template id="product_delivery_tracking" >
        <div class="modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-body">
<!--                        <t t-set="sol_delivery_progress" t-value="line.get_sol_delivery_progress()"/>-->
                        <div class="order_progress_container">
                            <div class="product_tracking_header">
                                <h5 t-esc="line.name_short" />
                            </div>
                            <t t-if="line.delivery_status=='cancel'">
                                <div class="cancel_sol">
                                    <h4>This product is cancelled.</h4>
                                </div>
                            </t>
                            <t t-else="">
                                <ul class="order_progress">
                                    <t t-foreach="delivery_progress" t-as="pro">
                                        <li t-attf-class="#{pro_value[0]}">
                                            <span t-attf-class="#{pro_value[0]}_bar"></span>
                                            <t t-if="pro_value[0] == 'complete'">
                                                <span>
                                                    <span><i class="fa fa-check-circle"></i></span>
                                                    <h5 class="#{pro_value[0]}"><t t-esc="pro" /> </h5>
                                                    <p><t t-esc="pro_value[1]"/> </p>
                                                </span>
                                            </t>
                                            <t t-else="">
                                                <span>
                                                    <span><i class="fa fa-circle"></i> </span>
                                                    <h5 class="#{pro_value[0]}"><t t-esc="pro" /> </h5>
                                                    <p><t t-esc="pro_value[1]"/> </p>
    <!--                                                <h6 class="#{pro_value[0]}"><t t-esc="pro_value[1]"/> </h6>-->
                                                </span>
                                            </t>
                                        </li>
                                    </t>
                                </ul>
                            </t>
                        </div>
                        <div class="modal-footer">
                            <div class="row booking_modal_footer">
                                <div class="col-12">
                                    <button type="button" class="btn btn-danger mr4 pull-right" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template id="payment_ss_update">
        <div class="modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-body">
<!--                        <t t-set="sol_delivery_progress" t-value="line.get_sol_delivery_progress()"/>-->
                        <div class="card mt-3 fa-border">
                            <h5 style="margin-top:5px;"> <Strong> Upload Payment Screenshot only with image file format.</Strong></h5>
                            <form action="/my/orders/payment/edit" method="post" class="s_website_form form-horizontal container-fluid mt32" enctype="multipart/form-data" id="file_upload_form">
                                <div t-attf-class="form-group">
                                    <div class="col-md-7 col-sm-8">
                                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                        <input type="hidden" name="sale_order_id" t-att-value="order.id"/>
                                        <input type="file" required="required" name="attachment" accept="image/*" class="file" multiple="true" data-show-upload="true"
                                            data-show-caption="true" lass="binary" id="ssImage" placeholder="Image file format: JPG JPEG PNG GIF TIFF RAW" onchange="return fileValidation()"/>
                                        <button type="submit" name="payment_upload_name" style="margin-top:20px;margin-right:20px" class="btn btn-primary mb32">
                                            Submit Screenshot
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <div class="row booking_modal_footer">
                                <div class="col-12">
                                    <button type="button" class="btn btn-danger mr4 pull-right" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <script>
                        function fileValidation() {
                            var fileInput =
                                document.getElementById('ssImage');

                            var filePath = fileInput.value;

                            // Allowing file type
                            var allowedExtensions =
                                /(\.jpeg|\.jpg|\.png|\.raw|\.tiff|\.gif)$/i;

                            if (!allowedExtensions.exec(filePath)) {
                                alert('Please upload payment screenshot only with image file type.');
                                fileInput.value = '';
                                return false;
                            }
                        }
                    </script>
                </div>
            </div>
        </div>

    </template>

    <template id="payment_ss_view_modal">
        <div class="modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-body">
                        <h3>Payment Screenshot for Order #<t t-esc="order.name"/> </h3>
                        <div class=" mt-3">
                            <form action="/my/orders/payment/view" method="post" class="s_website_form form-horizontal container-fluid mt32" enctype="multipart/form-data" id="file_upload_form">
                                <div t-attf-class="form-group ss_img_view_outer">
                                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                    <span id="ss_img_view" t-field="order.payment_upload"
                                      t-options="{'widget': 'image', 'qweb_img_responsive': False, 'class': 'rounded'}" />
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <div class="row booking_modal_footer">
                                <div class="col-12">
                                    <button type="button" class="btn btn-danger mr4 pull-right" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </template>

    <!--  Cancle Orders  -->
    <template id="portal_my_home_cancel_order" inherit_id="portal.portal_my_home" priority="20">
        <xpath expr="//div[hasclass('o_portal_docs')]" position="inside">
            <t t-if="cancel_order_count" t-call="portal.portal_docs_entry">
                <t t-set="title">Cancel Orders</t>
                <t t-set="url" t-value="'/my/cancel_orders'"/>
                <t t-set="count" t-value="cancel_order_count"/>
            </t>
        </xpath>
    </template>

    <template id="portal_my_home_cancel_order_menu_sale" inherit_id="portal.portal_breadcrumbs" priority="5">
        <xpath expr="//ol[hasclass('o_portal_submenu')]" position="inside">
            <li t-if="page_name == 'cancel_order' or cancel_order and cancel_order.state in ('cancel')" t-attf-class="breadcrumb-item #{'active ' if not cancel_order else ''}">
                <a t-if="cancel_order" t-attf-href="/my/cancel_orders?{{ keep_query() }}">Cancel Order </a>
                <t t-else="">Cancel Orders</t>
            </li>
            <li t-if="cancel_order" class="breadcrumb-item active">
                <span t-field="cancel_order.type_name"/>
                <t t-esc="cancel_order.name"/>
            </li>
        </xpath>
    </template>

</odoo>
